"use strict";(globalThis.webpackChunkphysical_ai_book=globalThis.webpackChunkphysical_ai_book||[]).push([[777],{8050(e,s,n){n.r(s),n.d(s,{assets:()=>t,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"module-1-ros2/nodes-topics-services","title":"Nodes, Topics, and Services","description":"Learning Objectives","source":"@site/../docs/module-1-ros2/nodes-topics-services.md","sourceDirName":"module-1-ros2","slug":"/module-1-ros2/nodes-topics-services","permalink":"/docs/module-1-ros2/nodes-topics-services","draft":false,"unlisted":false,"editUrl":"https://github.com/your-username/physical-ai-book/tree/main/../docs/module-1-ros2/nodes-topics-services.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Introduction to ROS 2","permalink":"/docs/module-1-ros2/introduction-to-ros2"},"next":{"title":"URDF and Robot Modeling","permalink":"/docs/module-1-ros2/urdf-modeling"}}');var r=n(4848),o=n(8453);const l={},c="Nodes, Topics, and Services",t={},a=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Nodes: The Basic Computational Units",id:"nodes-the-basic-computational-units",level:2},{value:"Creating a Node in Python",id:"creating-a-node-in-python",level:3},{value:"Topics: Publisher-Subscriber Communication",id:"topics-publisher-subscriber-communication",level:2},{value:"Key Concepts:",id:"key-concepts",level:3},{value:"Services: Request-Response Communication",id:"services-request-response-communication",level:2},{value:"Key Concepts:",id:"key-concepts-1",level:3},{value:"Quality of Service (QoS) Settings",id:"quality-of-service-qos-settings",level:2},{value:"Practical Example: Simple Publisher-Subscriber",id:"practical-example-simple-publisher-subscriber",level:2},{value:"Publisher Code:",id:"publisher-code",level:3},{value:"Subscriber Code:",id:"subscriber-code",level:3},{value:"Running the Example",id:"running-the-example",level:2},{value:"Common ROS 2 Commands",id:"common-ros-2-commands",level:2},{value:"Summary",id:"summary",level:2},{value:"Exercises",id:"exercises",level:2},{value:"Resources",id:"resources",level:2}];function d(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"nodes-topics-and-services",children:"Nodes, Topics, and Services"})}),"\n",(0,r.jsx)(s.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,r.jsx)(s.p,{children:"By the end of this chapter, you will be able to:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Create and manage ROS 2 nodes using Python"}),"\n",(0,r.jsx)(s.li,{children:"Implement publisher and subscriber communication patterns"}),"\n",(0,r.jsx)(s.li,{children:"Design and use service-based communication"}),"\n",(0,r.jsx)(s.li,{children:"Understand Quality of Service (QoS) settings"}),"\n",(0,r.jsx)(s.li,{children:"Debug communication issues in ROS 2"}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"nodes-the-basic-computational-units",children:"Nodes: The Basic Computational Units"}),"\n",(0,r.jsx)(s.p,{children:"In ROS 2, a node is a process that performs computation. Nodes are the fundamental building blocks of a ROS 2 program. Each node is designed to perform a specific task and communicates with other nodes through topics, services, or actions."}),"\n",(0,r.jsx)(s.h3,{id:"creating-a-node-in-python",children:"Creating a Node in Python"}),"\n",(0,r.jsx)(s.p,{children:"To create a node in Python, you need to:"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["Import the ",(0,r.jsx)(s.code,{children:"rclpy"})," library"]}),"\n",(0,r.jsx)(s.li,{children:"Initialize the ROS 2 client library"}),"\n",(0,r.jsx)(s.li,{children:"Create a node instance"}),"\n",(0,r.jsx)(s.li,{children:"Spin the node to process callbacks"}),"\n",(0,r.jsx)(s.li,{children:"Shutdown when done"}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"topics-publisher-subscriber-communication",children:"Topics: Publisher-Subscriber Communication"}),"\n",(0,r.jsx)(s.p,{children:"Topics enable asynchronous, many-to-many communication between nodes using a publish-subscribe pattern. Publishers send messages to a topic, and subscribers receive messages from a topic."}),"\n",(0,r.jsx)(s.h3,{id:"key-concepts",children:"Key Concepts:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Message types"}),": Define the structure of data exchanged"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Topic names"}),": Unique identifiers for communication channels"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Queues"}),": Buffer messages when processing rates differ"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"QoS policies"}),": Configure reliability, durability, etc."]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"services-request-response-communication",children:"Services: Request-Response Communication"}),"\n",(0,r.jsx)(s.p,{children:"Services provide synchronous, one-to-one communication using a request-response pattern. A client sends a request to a service, and the service sends back a response."}),"\n",(0,r.jsx)(s.h3,{id:"key-concepts-1",children:"Key Concepts:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Service types"}),": Define the request and response message structure"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Service names"}),": Unique identifiers for services"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Synchronous"}),": Client waits for response before continuing"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"quality-of-service-qos-settings",children:"Quality of Service (QoS) Settings"}),"\n",(0,r.jsx)(s.p,{children:"QoS settings allow you to configure communication behavior:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Reliability"}),": Best effort vs. reliable delivery"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Durability"}),": Volatile vs. transient local"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"History"}),": Keep last N messages vs. keep all messages"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Depth"}),": Size of message queue"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"practical-example-simple-publisher-subscriber",children:"Practical Example: Simple Publisher-Subscriber"}),"\n",(0,r.jsx)(s.p,{children:'Let\'s create a simple publisher that sends "Hello World" messages and a subscriber that receives and prints them.'}),"\n",(0,r.jsx)(s.h3,{id:"publisher-code",children:"Publisher Code:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass MinimalPublisher(Node):\n    def __init__(self):\n        super().__init__('minimal_publisher')\n        self.publisher_ = self.create_publisher(String, 'topic', 10)\n        timer_period = 0.5  # seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n        self.i = 0\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = 'Hello World: %d' % self.i\n        self.publisher_.publish(msg)\n        self.get_logger().info('Publishing: \"%s\"' % msg.data)\n        self.i += 1\n\ndef main(args=None):\n    rclpy.init(args=args)\n    minimal_publisher = MinimalPublisher()\n    rclpy.spin(minimal_publisher)\n    minimal_publisher.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(s.h3,{id:"subscriber-code",children:"Subscriber Code:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass MinimalSubscriber(Node):\n    def __init__(self):\n        super().__init__('minimal_subscriber')\n        self.subscription = self.create_subscription(\n            String,\n            'topic',\n            self.listener_callback,\n            10)\n        self.subscription  # prevent unused variable warning\n\n    def listener_callback(self, msg):\n        self.get_logger().info('I heard: \"%s\"' % msg.data)\n\ndef main(args=None):\n    rclpy.init(args=args)\n    minimal_subscriber = MinimalSubscriber()\n    rclpy.spin(minimal_subscriber)\n    minimal_subscriber.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(s.h2,{id:"running-the-example",children:"Running the Example"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["Save the publisher code as ",(0,r.jsx)(s.code,{children:"talker.py"})]}),"\n",(0,r.jsxs)(s.li,{children:["Save the subscriber code as ",(0,r.jsx)(s.code,{children:"listener.py"})]}),"\n",(0,r.jsx)(s.li,{children:"Make sure ROS 2 environment is sourced"}),"\n",(0,r.jsxs)(s.li,{children:["Run the publisher: ",(0,r.jsx)(s.code,{children:"python3 talker.py"})]}),"\n",(0,r.jsxs)(s.li,{children:["In another terminal, run the subscriber: ",(0,r.jsx)(s.code,{children:"python3 listener.py"})]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"common-ros-2-commands",children:"Common ROS 2 Commands"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"ros2 node list"}),": List all active nodes"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"ros2 node info <node_name>"}),": Get detailed information about a node"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"ros2 topic list"}),": List all active topics"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"ros2 topic echo <topic_name>"}),": Print messages from a topic"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"ros2 topic info <topic_name>"}),": Get information about a topic"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"ros2 service list"}),": List all available services"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"summary",children:"Summary"}),"\n",(0,r.jsx)(s.p,{children:"Nodes, topics, and services form the core communication infrastructure of ROS 2. Understanding these concepts is essential for building distributed robotic applications. Topics provide asynchronous communication for streaming data, while services provide synchronous request-response communication for specific tasks."}),"\n",(0,r.jsx)(s.h2,{id:"exercises",children:"Exercises"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"Create a publisher that publishes sensor data (e.g., temperature readings)"}),"\n",(0,r.jsx)(s.li,{children:"Create a subscriber that processes and displays the sensor data"}),"\n",(0,r.jsx)(s.li,{children:"Implement a service that performs a simple calculation based on request"}),"\n",(0,r.jsx)(s.li,{children:"Experiment with different QoS settings and observe the effects"}),"\n",(0,r.jsx)(s.li,{children:"Create a node that acts as both a publisher and subscriber"}),"\n",(0,r.jsxs)(s.li,{children:["Use ",(0,r.jsx)(s.code,{children:"ros2 topic hz"})," to measure the frequency of published messages"]}),"\n",(0,r.jsx)(s.li,{children:"Implement a custom message type and use it in a publisher/subscriber pair"}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"resources",children:"Resources"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://docs.ros.org/en/humble/Concepts/About-Nodes.html",children:"ROS 2 Node Concepts"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://docs.ros.org/en/humble/Concepts/About-Topics.html",children:"ROS 2 Topic Concepts"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://docs.ros.org/en/humble/Concepts/About-Services.html",children:"ROS 2 Service Concepts"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://docs.ros.org/en/humble/p/rclpy/",children:"rclpy API Documentation"})}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453(e,s,n){n.d(s,{R:()=>l,x:()=>c});var i=n(6540);const r={},o=i.createContext(r);function l(e){const s=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(o.Provider,{value:s},e.children)}}}]);